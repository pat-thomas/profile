#!/usr/bin/env ruby

require 'rubygems'
require 'base_app'
require 'fileutils'

class SetPair < BaseApp
  def pair_name
    if ARGV.join(" ").downcase.include? "and"
      ARGV.join(" ")
    else
      ARGV.join(" and ")
    end
  end

  def run
    gitconfig_file = "#{ENV['HOME']}/.gitconfig"
    lines = File.readlines(gitconfig_file)
    FileUtils.copy gitconfig_file, "#{ENV['HOME']}/.bak.gitconfig"
    lines.each do |line|
      line.gsub! /name = .+$/, "name = #{pair_name}"
    end
    File.open(gitconfig_file,"w") do |f|
      lines.each do |line|
        f.puts line
      end
    end

    if pair_name =~ /josh/i
      $stderr.puts "I _SURE_ LIKE IRISH SPRING!"
    end

    if pair_name =~ /kyle/i
      $stderr.puts "ba ba ba ba boom!"
    end

    if pair_name =~ /pat/i
      $stderr.puts "I love my girlfriend so much"
    end

    if pair_name =~ /linus/i
      $stderr.puts "NOOO, REALLY?"
    end

    if pair_name =~ /nick/i
      $stderr.puts "I HAVE CORN"
    end

    if pair_name =~ /paul/i
      $stderr.puts "YUM YUM CHOCOLATE FRIDAY!"
    end

    if pair_name =~ /rich/i
      $stderr.puts "If Minecraft had dinosaurs I would be soooo happy"
    end
  end
end

SetPair.main
